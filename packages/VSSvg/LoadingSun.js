import React, { Component } from 'react';
import { Animated, Easing } from 'react-native';
import PropTypes from 'prop-types';
import Svg, { G, Path } from 'react-native-svg';

const AnimatedSvg = Animated.createAnimatedComponent(Svg);
const timing = 4000;

export default class LoadingSun extends Component {
  constructor(props) {
    super(props);
    this.spinValue = new Animated.Value(0);
  }

  componentDidMount() {
    this.spin();
  }

  spin() {
    this.spinValue.setValue(0);
    Animated.timing(
      this.spinValue,
      {
        toValue: 1,
        duration: timing,
        easing: Easing.linear,
        useNativeDriver: true,
      }
    ).start(() => {
      this.spin();
    });
  }

  render() {
    const spin = this.spinValue.interpolate({
      inputRange: [ 0, 1 ],
      outputRange: [ '0deg', '360deg' ],
    });

    return (
      <AnimatedSvg
        width={ this.props.width }
        height={ this.props.height }
        viewBox="0 0 41 40"
        style={ {
          transform: [ { rotate: spin } ],
        } }
      >
        <G
          id="Loading_Sun"
          transform={ { translate: '(167.000000, 242.000000)' } }
          fill={ this.props.color }
        >
          <Path
            d="M36.9828387,23.2527742 L40.8154839,19.972 L36.9828387,16.6917419 C36.7061935,16.4553548 36.6174194,16.0651613 36.764129,15.7316129 L38.7963871,11.1150968 L33.9188387,9.83032258 C33.5660645,9.73716129 33.316,9.42464516 33.303871,9.06012903 L33.1325161,4.01729032 L28.1774194,4.9683871 C27.8205161,5.03651613 27.460129,4.86309677 27.2908387,4.54 L24.9486452,0.0732903226 L20.9002581,3.08645161 C20.607871,3.30412903 20.2076129,3.30412903 19.9143226,3.08645161 L15.8669677,0.0732903226 L13.5246452,4.54 C13.3553548,4.86309677 12.9949677,5.03651613 12.6380645,4.9683871 L7.68296774,4.01729032 L7.5116129,9.06012903 C7.49948387,9.42464516 7.24954839,9.73716129 6.89664516,9.83032258 L2.01909677,11.1150968 L4.05135484,15.7316129 C4.19806452,16.0651613 4.10941935,16.4553548 3.83264516,16.6917419 L0,19.972 L3.83264516,23.2527742 C4.10941935,23.4891613 4.19806452,23.8792258 4.05135484,24.2123871 L2.01909677,28.8287742 L6.89664516,30.1140645 C7.24954839,30.2068387 7.49948387,30.519871 7.5116129,30.8842581 L7.68296774,35.9265806 L12.6380645,34.976 C12.6895484,34.9669677 12.7424516,34.9614194 12.7938065,34.9614194 C13.0962581,34.9614194 13.38,35.1287742 13.5246452,35.4043871 L15.8669677,39.8712258 L19.9143226,36.8575484 C20.2076129,36.639871 20.607871,36.639871 20.9002581,36.8575484 L24.9486452,39.8712258 L27.2908387,35.4043871 C27.460129,35.0812903 27.8205161,34.908 28.1774194,34.976 L33.1325161,35.9265806 L33.303871,30.8842581 C33.316,30.519871 33.5660645,30.2068387 33.9188387,30.1140645 L38.7963871,28.8287742 L36.764129,24.2123871 C36.6174194,23.8792258 36.7061935,23.4891613 36.9828387,23.2527742 Z M20.4077419,35.2496774 C11.9833548,35.2496774 5.13058065,28.3963871 5.13058065,19.972 C5.13058065,11.548129 11.9833548,4.69470968 20.4077419,4.69470968 C28.832129,4.69470968 35.6850323,11.548129 35.6850323,19.972 C35.6850323,28.3963871 28.832129,35.2496774 20.4077419,35.2496774 Z"
          />
          <Path
            d="M20.4077419,6.34645161 C12.8941935,6.34645161 6.78180645,12.4583226 6.78180645,19.972 C6.78180645,27.4860645 12.8941935,33.5979355 20.4077419,33.5979355 C27.9203871,33.5979355 34.0338065,27.4860645 34.0338065,19.972 C34.0338065,12.4583226 27.9203871,6.34645161 20.4077419,6.34645161 Z"
          />
        </G>
      </AnimatedSvg>
    );
  }
}

LoadingSun.propTypes = {
  width: PropTypes.number,
  height: PropTypes.number,
  color: PropTypes.string,
};

LoadingSun.defaultProps = {
  width: 31,
  height: 30,
  color: '#FF8200',
};
